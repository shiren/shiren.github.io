<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.36e07a846507a6eb5914.css">.token.comment{font-size:13px}code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;font-family:Fira Code,Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre-wrap;word-spacing:normal;word-break:break-all;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2e3440}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#636f88}.token.punctuation{color:#81a1c1}.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#81a1c1}.token.number{color:#b48ead}.token.boolean{color:#81a1c1}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a3be8c}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#81a1c1}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#88c0d0}.token.keyword{color:#81a1c1}.token.important,.token.regex{color:#ebcb8b}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}
/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}[hidden],template{display:none}body{font-size:1.2em;line-height:1.42857143;color:#404040}body,h1,h2,h3,h4,h5,h6{font-family:"\B098\B214\ACE0\B515",NanumGothic,NanumGothicWebFont,Malgun Gothic,"\B9D1\C740   \ACE0\B515",Dotum,"\B3CB\C6C0",Helvetica,Apple SD Gothic Neo,"sans-serif"}h1,h2,h3,h4,h5,h6{margin:30px 0 10px;font-weight:800}article a{text-decoration:none;color:#008aff}article a:hover{text-decoration:underline}p{line-height:1.5;margin:20px 0}li>p{margin:0}li{padding:2px 0}code.language-text{padding:2px 4px;color:#c7254e;background-color:#f9f2f4!important;border-radius:4px}div.gatsby-highlight{font-size:.9em}article em{font-style:normal;text-decoration:underline;text-underline-position:under}article img{display:block;width:90%;margin:0 auto}blockquote{padding:5px;color:#888;font-weight:500}blockquote p{line-height:1.6}</style><meta name="generator" content="Gatsby 2.24.65"/><style data-styled="" data-styled-version="5.2.0">.duvCfz{display:inline-block;vertical-align:middle;overflow:hidden;}/*!sc*/
data-styled.g1[id="StyledIconBase-ea9ulj-0"]{content:"duvCfz,"}/*!sc*/
.edzUAc{border:1px solid #eaeaea;border-width:0 1px 1px;background:#f5f5f5;text-align:center;}/*!sc*/
.edzUAc:hover{background:#eee;}/*!sc*/
data-styled.g2[id="top__SubMenu-ithwo9-0"]{content:"edzUAc,"}/*!sc*/
.bMktIb{float:right;width:25px;padding:0;margin-top:15px;margin-right:20px;background:none;border:none;}/*!sc*/
data-styled.g3[id="top__MenuButton-ithwo9-1"]{content:"bMktIb,"}/*!sc*/
.eFqqxc{float:right;padding:0;margin:0;}/*!sc*/
.eFqqxc ul{padding:0;}/*!sc*/
.eFqqxc > li{float:left;}/*!sc*/
.eFqqxc li{list-style:none;}/*!sc*/
.eFqqxc a,.eFqqxc button{display:block;padding:15px 15px;line-height:20px;background:none;border:none;text-transform:uppercase;font-size:12px;-webkit-letter-spacing:1px;-moz-letter-spacing:1px;-ms-letter-spacing:1px;letter-spacing:1px;color:#000;-webkit-text-decoration:none;text-decoration:none;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;cursor:pointer;}/*!sc*/
.eFqqxc > li > a,.eFqqxc > li > button{font-weight:500;}/*!sc*/
.eFqqxc > li > a:hover,.eFqqxc > li > button:hover{-webkit-text-decoration:underline;text-decoration:underline;}/*!sc*/
data-styled.g4[id="top__MenuList-ithwo9-2"]{content:"eFqqxc,"}/*!sc*/
.fTBtLg{display:none;position:absolute;}/*!sc*/
data-styled.g5[id="top__SubMenus-ithwo9-3"]{content:"fTBtLg,"}/*!sc*/
.jMtvLs:hover{background:#eee;}/*!sc*/
.jMtvLs:after{content:' ▼';}/*!sc*/
.jMtvLs ~ ul{display:none;}/*!sc*/
data-styled.g6[id="top__DropButton-ithwo9-4"]{content:"jMtvLs,"}/*!sc*/
.fnpIlM:hover .top__DropButton-ithwo9-4{background:#eee;}/*!sc*/
.fnpIlM:hover .top__SubMenus-ithwo9-3{display:block;}/*!sc*/
data-styled.g7[id="top__DropMenu-ithwo9-5"]{content:"fnpIlM,"}/*!sc*/
.qQGfI{float:left;padding:15px 15px;font-size:18px;line-height:20px;font-weight:800;color:#000;-webkit-text-decoration:none;text-decoration:none;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;}/*!sc*/
.qQGfI > img{width:30px;vertical-align:middle;border-radius:50%;margin:0 10px;}/*!sc*/
data-styled.g8[id="top__LogoButton-ithwo9-6"]{content:"qQGfI,"}/*!sc*/
.lbhjwZ{position:fixed;top:0;left:0;height:5px;background:#00bcbb;opacity:0.6;}/*!sc*/
data-styled.g9[id="top__Indicator-ithwo9-7"]{content:"lbhjwZ,"}/*!sc*/
.fmptlY{position:fixed;right:0;left:0;top:0;min-height:50px;padding:20px 0;margin-bottom:20px;border-bottom:1px solid #000;background:#fff;-webkit-transition:background 0.5s ease-in-out,padding 0.5s ease-in-out;transition:background 0.5s ease-in-out,padding 0.5s ease-in-out;z-index:1000;}/*!sc*/
.fmptlY > .top__MenuButton-ithwo9-1{display:none;}/*!sc*/
@media only screen and (max-width:768px){.fmptlY > .top__MenuButton-ithwo9-1{display:inline-block;}.fmptlY > .top__MenuList-ithwo9-2{display:none;float:none;margin-top:60px;}.fmptlY > .top__MenuList-ithwo9-2 > li{float:none;}.fmptlY > .top__MenuList-ithwo9-2 > li > a,.fmptlY > .top__MenuList-ithwo9-2 > li > button{-webkit-text-decoration:none;text-decoration:none;}.fmptlY .top__SubMenus-ithwo9-3{display:block;position:relative;background:none;}.fmptlY .top__DropButton-ithwo9-4{outline:0;cursor:default;}.fmptlY .top__DropButton-ithwo9-4:hover{background:none;-webkit-text-decoration:none;text-decoration:none;}.fmptlY .top__DropMenu-ithwo9-5{background:none;}.fmptlY .top__DropMenu-ithwo9-5:hover .top__DropButton-ithwo9-4{background:none;}.fmptlY .top__SubMenu-ithwo9-0{box-sizing:border-box;padding-left:30px;text-align:left;background:none;border:none;}.fmptlY .top__SubMenu-ithwo9-0:before{content:'-';vertical-align:middle;}.fmptlY .top__SubMenu-ithwo9-0 a,.fmptlY .top__SubMenu-ithwo9-0 button{display:inline-block;vertical-align:middle;-webkit-text-decoration:none;text-decoration:none;}}/*!sc*/
@media only screen and (max-width:460px){.fmptlY{position:relative;}}/*!sc*/
data-styled.g10[id="top__Wrapper-ithwo9-8"]{content:"fmptlY,"}/*!sc*/
.dKXtAy{margin-top:100px;padding:50px 0;border-top:1px #eaeaea solid;text-align:center;color:#fff;background:#000;}/*!sc*/
.dKXtAy > div{margin:0 auto;width:750px;text-align:center;font-size:14px;}/*!sc*/
data-styled.g11[id="footer__Wrapper-sc-1omp129-0"]{content:"dKXtAy,"}/*!sc*/
.cfgaXG{margin:0;padding:0;text-align:center;}/*!sc*/
.cfgaXG > li{display:inline-block;padding:0 10px;width:2em;height:2em;list-style:none;vertical-align:middle;}/*!sc*/
.cfgaXG a{color:#fff;}/*!sc*/
data-styled.g12[id="footer__FooterLinks-sc-1omp129-1"]{content:"cfgaXG,"}/*!sc*/
.hlzJWw{margin:120px auto 0;max-width:680px;padding:0 15px;box-sizing:border-box;}/*!sc*/
@media only screen and (max-width:768px){.hlzJWw{width:100%;}}/*!sc*/
data-styled.g13[id="layout__Container-dwdd9s-0"]{content:"hlzJWw,"}/*!sc*/
.lkGVVW{display:inline-block;margin-right:10px;border-bottom:1px solid #777;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;font-size:12px;font-weight:400;text-transform:uppercase;-webkit-text-decoration:none;text-decoration:none;color:#777;}/*!sc*/
data-styled.g22[id="category__Category-sc-156lajf-0"]{content:"lkGVVW,"}/*!sc*/
.hPYrMm{width:150px;position:-webkit-sticky;position:sticky;top:100px;margin-left:-180px;vertical-align:middle;}/*!sc*/
.hPYrMm > button{margin:0 0.25rem;}/*!sc*/
.hPYrMm > button:first-child{margin:0 0.25rem 0 0 !important;}/*!sc*/
@media only screen and (max-width:1080px){.hPYrMm{position:relative;float:right;width:200px;top:0;margin:-69px 0 0 0;}}/*!sc*/
@media only screen and (max-width:460px){.hPYrMm{position:relative;float:none;margin:-40px 0 0 0;}}/*!sc*/
data-styled.g33[id="share__Wrapper-sc-1h33god-0"]{content:"hPYrMm,"}/*!sc*/
.drbwQL{vertical-align:middle;}/*!sc*/
.drbwQL > svg{height:20px;width:20px;}/*!sc*/
data-styled.g34[id="share__Icon-sc-1h33god-1"]{content:"drbwQL,"}/*!sc*/
.kfPxZz{border-bottom:1px solid #000;color:#000;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;font-style:normal;font-weight:800;}/*!sc*/
@media only screen and (max-width:1080px){.kfPxZz{display:inline-block;border-bottom:none;vertical-align:middle;margin:0;}}/*!sc*/
data-styled.g35[id="share__Title-sc-1h33god-2"]{content:"kfPxZz,"}/*!sc*/
.bxZXPa{margin-top:40px;padding-top:10px;border-top:1px solid #000;}/*!sc*/
data-styled.g37[id="recomendPost__Wrapper-sc-3jwe1s-0"]{content:"bxZXPa,"}/*!sc*/
.dTTBOH{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;padding:20px 10px 0;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}/*!sc*/
data-styled.g38[id="recomendPost__Container-sc-3jwe1s-1"]{content:"dTTBOH,"}/*!sc*/
.jiiBBj{padding:0;margin:10px 0 0 0;font-size:15px;color:#000;-webkit-transition:color 0.3s ease-in-out;transition:color 0.3s ease-in-out;}/*!sc*/
data-styled.g39[id="recomendPost__Title-sc-3jwe1s-2"]{content:"jiiBBj,"}/*!sc*/
.ivcrIP{-webkit-flex:0 0 49%;-ms-flex:0 0 49%;flex:0 0 49%;margin:0 0 25px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;box-sizing:border-box;}/*!sc*/
.ivcrIP > div{padding:8px;border:1px solid #000;border-top:10px solid #000;-webkit-transition:background 0.3s ease-in-out;transition:background 0.3s ease-in-out;}/*!sc*/
.ivcrIP:hover > div{background:#000;}/*!sc*/
.ivcrIP:hover .recomendPost__Title-sc-3jwe1s-2{color:#fff;}/*!sc*/
data-styled.g40[id="recomendPost__Item-sc-3jwe1s-3"]{content:"ivcrIP,"}/*!sc*/
.jjtNTt{margin:10px 0 0 0;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;font-weight:300;font-size:14px;line-height:1.5;color:#b1b1b1;}/*!sc*/
data-styled.g41[id="recomendPost__Date-sc-3jwe1s-4"]{content:"jjtNTt,"}/*!sc*/
.ifREFF{display:block;-webkit-text-decoration:none;text-decoration:none;}/*!sc*/
data-styled.g42[id="recomendPost__RecomendLink-sc-3jwe1s-5"]{content:"ifREFF,"}/*!sc*/
.fwhAwW{display:block;margin-top:40px;text-align:center;}/*!sc*/
.fwhAwW img{height:51px;width:217px;}/*!sc*/
data-styled.g43[id="post__BuyMeACoffee-jduihc-0"]{content:"fwhAwW,"}/*!sc*/
.eORrvq{position:relative;margin:130px 0 40px;}/*!sc*/
.eORrvq > h1{font-size:50px;}/*!sc*/
.eORrvq > p{margin:0 0 10px;font-size:18px;font-style:italic;color:#808080;}/*!sc*/
data-styled.g44[id="post__Headline-jduihc-1"]{content:"eORrvq,"}/*!sc*/
.jqxvuf{margin-top:-86px;}/*!sc*/
@media only screen and (max-width:1080px){.jqxvuf{margin-top:0;}}/*!sc*/
data-styled.g45[id="post__Article-jduihc-2"]{content:"jqxvuf,"}/*!sc*/
.bMNeLH{display:block;width:200px;margin:10px auto 10px;color:#404040;-webkit-text-decoration:none;text-decoration:none;font-family:'Open Sans','Helvetica Neue',Helvetica,Arial,sans-serif;}/*!sc*/
data-styled.g46[id="post__AD-jduihc-3"]{content:"bMNeLH,"}/*!sc*/
</style><title data-react-helmet="true">도커로 노드앱을 구축하며 배운것들 · shiren the creator</title><link data-react-helmet="true" rel="shortcut icon" type="image/x-icon" href="/favicon.ico"/><link data-react-helmet="true" rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800"/><meta data-react-helmet="true" name="description" content="도커로 노드 앱을 구축하며 배운것들 원문
http://jdlm.info/articles/2016/03/06/lessons-building-node-app-docker.html
by John Lees-Miller 도커를 이용해 노드제이에스 어플리케이션을 개발 하고 배포 하면서 어렵게 배운 팁과 트릭을 공유하고자 한다. 이 튜토리얼 아티클에서는 socket.io chat example을 이용해 기초부터 프로덕션에 응용 가능한 상태까지 될 수 있으면 쉽게 이해할 수 있도록 설명하려 한다. 아래와 같은 내용을 다룬다. 도커를 이용해 노드…"/><meta data-react-helmet="true" name="image" content="http://jdlm.info/assets/docker_chat_demo/chat.png"/><meta data-react-helmet="true" name="author" content="Sungho Kim"/><meta data-react-helmet="true" property="og:url" content="https://blog.shiren.dev/2016-08-23-도커로-노드앱을-구축하며-배운것들/"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="도커로 노드앱을 구축하며 배운것들"/><meta data-react-helmet="true" property="og:description" content="도커로 노드 앱을 구축하며 배운것들 원문
http://jdlm.info/articles/2016/03/06/lessons-building-node-app-docker.html
by John Lees-Miller 도커를 이용해 노드제이에스 어플리케이션을 개발 하고 배포 하면서 어렵게 배운 팁과 트릭을 공유하고자 한다. 이 튜토리얼 아티클에서는 socket.io chat example을 이용해 기초부터 프로덕션에 응용 가능한 상태까지 될 수 있으면 쉽게 이해할 수 있도록 설명하려 한다. 아래와 같은 내용을 다룬다. 도커를 이용해 노드…"/><meta data-react-helmet="true" property="og:image" content="http://jdlm.info/assets/docker_chat_demo/chat.png"/><meta data-react-helmet="true" property="image" content="http://jdlm.info/assets/docker_chat_demo/chat.png"/><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"/><meta data-react-helmet="true" name="twitter:creator" content="@shirenbeat"/><meta data-react-helmet="true" name="twitter:title" content="도커로 노드앱을 구축하며 배운것들"/><meta data-react-helmet="true" name="twitter:description" content="도커로 노드 앱을 구축하며 배운것들 원문
http://jdlm.info/articles/2016/03/06/lessons-building-node-app-docker.html
by John Lees-Miller 도커를 이용해 노드제이에스 어플리케이션을 개발 하고 배포 하면서 어렵게 배운 팁과 트릭을 공유하고자 한다. 이 튜토리얼 아티클에서는 socket.io chat example을 이용해 기초부터 프로덕션에 응용 가능한 상태까지 될 수 있으면 쉽게 이해할 수 있도록 설명하려 한다. 아래와 같은 내용을 다룬다. 도커를 이용해 노드…"/><meta data-react-helmet="true" name="twitter:image" content="http://jdlm.info/assets/docker_chat_demo/chat.png"/><script data-react-helmet="true" type="application/ld+json">
            {
              "@context": "https://schema.org",
              "@type": "BlogPosting",
              "headline": "도커로 노드앱을 구축하며 배운것들",
              "image": [
                "http://jdlm.info/assets/docker_chat_demo/chat.png" 
              ],
              "datePublished": "2016-08-23T00:00:00.000Z",
              "test": 1
            }
          </script><link rel="alternate" type="application/rss+xml" title="shiren.dev RSS Feed" href="/feed.xml"/><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="sitemap" type="application/xml" href="/sitemap.xml"/><script data-ad-client="ca-pub-4811193197471582" async="" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><link as="script" rel="preload" href="/webpack-runtime-fa2cbd3128fdd077019f.js"/><link as="script" rel="preload" href="/styles-55e82d6ff5158c00b714.js"/><link as="script" rel="preload" href="/framework-de237a875aa45b276a9d.js"/><link as="script" rel="preload" href="/app-405ee9187730cca34a4a.js"/><link as="script" rel="preload" href="/commons-8f7b6066959a66490891.js"/><link as="script" rel="preload" href="/d02ec7a3dda7d60b2b6f376de52e71913d9ba5e3-33b05cc05498f66ebadc.js"/><link as="script" rel="preload" href="/component---src-templates-post-tsx-aead819d3dc60c6642f1.js"/><link as="fetch" rel="preload" href="/page-data/2016-08-23-도커로-노드앱을-구축하며-배운것들/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1529427419.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1755485493.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/2738229898.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/993531770.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><nav class="top__Wrapper-ithwo9-8 fmptlY"><a href="https://blog.shiren.dev" class="top__LogoButton-ithwo9-6 qQGfI"><img alt="logo" src="/image/profile.jpg"/>shiren the creator</a><button class="top__MenuButton-ithwo9-1 bMktIb"><svg viewBox="0 0 448 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M432 416H16a16 16 0 00-16 16v32a16 16 0 0016 16h416a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-128H16a16 16 0 00-16 16v32a16 16 0 0016 16h416a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-128H16a16 16 0 00-16 16v32a16 16 0 0016 16h416a16 16 0 0016-16v-32a16 16 0 00-16-16zm0-128H16A16 16 0 000 48v32a16 16 0 0016 16h416a16 16 0 0016-16V48a16 16 0 00-16-16z"></path></svg></button><ul class="top__MenuList-ithwo9-2 eFqqxc"><li><a href="/aboutme">ABOUT ME</a></li><li><a href="https://soundcloud.com/shiren" target="__blank">SOUNDCLOUD</a></li><li class="top__DropMenu-ithwo9-5 fnpIlM"><button class="top__DropButton-ithwo9-4 jMtvLs">OPENSOURCES</button><ul class="top__SubMenus-ithwo9-3 fTBtLg"><li class="top__SubMenu-ithwo9-0 edzUAc"><a href="https://ui.toast.com" target="__blank">TOAST UI</a></li><li class="top__SubMenu-ithwo9-0 edzUAc"><a href="https://github.com/shiren/upbo" target="__blank">UPBO Emacs + Karma integration</a></li><li class="top__SubMenu-ithwo9-0 edzUAc"><a href="https://github.com/shiren/karma-narrow-reporter" target="__blank">Karma narrow reporter</a></li></ul></li></ul><span style="width:0%" class="top__Indicator-ithwo9-7 lbhjwZ"></span></nav><div class="layout__Container-dwdd9s-0 hlzJWw"><div><header class="post__Headline-jduihc-1 eORrvq"><h1>도커로 노드앱을 구축하며 배운것들</h1><p>Posted on <!-- -->23 August, 2016<!-- --> </p></header><div class="share__Wrapper-sc-1h33god-0 hPYrMm"><h3 class="share__Title-sc-1h33god-2 kfPxZz">Share</h3><button aria-label="facebook" class="react-share__ShareButton button is-outlined is-rounded facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><span class="share__Icon-sc-1h33god-1 drbwQL"><svg viewBox="0 0 320 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M279.14 288l14.22-92.66h-88.91v-60.13c0-25.35 12.42-50.06 52.24-50.06h40.42V6.26S260.43 0 225.36 0c-73.22 0-121.08 44.38-121.08 124.72v70.62H22.89V288h81.39v224h100.17V288z"></path></svg></span></button><button aria-label="twitter" class="react-share__ShareButton button is-outlined is-rounded twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><span class="share__Icon-sc-1h33god-1 drbwQL icon"><svg viewBox="0 0 512 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></span></button><button aria-label="linkedin" class="react-share__ShareButton button is-outlined is-rounded linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><span class="share__Icon-sc-1h33god-1 drbwQL icon"><svg viewBox="0 0 448 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M100.28 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 01107.58 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.28 61.9 111.28 142.3V448z"></path></svg></span></button><button aria-label="reddit" class="react-share__ShareButton button is-outlined is-rounded reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><span class="share__Icon-sc-1h33god-1 drbwQL icon"><svg viewBox="0 0 512 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M440.3 203.5c-15 0-28.2 6.2-37.9 15.9-35.7-24.7-83.8-40.6-137.1-42.3L293 52.3l88.2 19.8c0 21.6 17.6 39.2 39.2 39.2 22 0 39.7-18.1 39.7-39.7s-17.6-39.7-39.7-39.7c-15.4 0-28.7 9.3-35.3 22l-97.4-21.6c-4.9-1.3-9.7 2.2-11 7.1L246.3 177c-52.9 2.2-100.5 18.1-136.3 42.8-9.7-10.1-23.4-16.3-38.4-16.3-55.6 0-73.8 74.6-22.9 100.1-1.8 7.9-2.6 16.3-2.6 24.7 0 83.8 94.4 151.7 210.3 151.7 116.4 0 210.8-67.9 210.8-151.7 0-8.4-.9-17.2-3.1-25.1 49.9-25.6 31.5-99.7-23.8-99.7zM129.4 308.9c0-22 17.6-39.7 39.7-39.7 21.6 0 39.2 17.6 39.2 39.7 0 21.6-17.6 39.2-39.2 39.2-22 .1-39.7-17.6-39.7-39.2zm214.3 93.5c-36.4 36.4-139.1 36.4-175.5 0-4-3.5-4-9.7 0-13.7 3.5-3.5 9.7-3.5 13.2 0 27.8 28.5 120 29 149 0 3.5-3.5 9.7-3.5 13.2 0 4.1 4 4.1 10.2.1 13.7zm-.8-54.2c-21.6 0-39.2-17.6-39.2-39.2 0-22 17.6-39.7 39.2-39.7 22 0 39.7 17.6 39.7 39.7-.1 21.5-17.7 39.2-39.7 39.2z"></path></svg></span></button></div><article class="post__Article-jduihc-2 jqxvuf"><ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins><h2>도커로 노드 앱을 구축하며 배운것들</h2><ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins><blockquote><ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins><p>원문<ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins><a href="http://jdlm.info/articles/2016/03/06/lessons-building-node-app-docker.html">http://jdlm.info/articles/2016/03/06/lessons-building-node-app-docker.html</a><ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins>by John Lees-Miller</p><ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins></blockquote><ins class="adsbygoogle" style="display: block;text-align: center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins><p><a href="https://www.docker.com/">도커</a>를 이용해 노드제이에스 어플리케이션을 개발 하고 배포 하면서 어렵게 배운 팁과 트릭을 공유하고자 한다.</p><p>이 튜토리얼 아티클에서는 <a href="http://socket.io/get-started/chat/">socket.io chat example</a>을 이용해 기초부터 프로덕션에 응용 가능한 상태까지 될 수 있으면 쉽게 이해할 수 있도록 설명하려 한다.</p><p>아래와 같은 내용을 다룬다.</p><ul><li>도커를 이용해 노드 어플리케이션을 시작하는 방법</li><li>모든것을 루트로 실행 하지 않기(BAD!)</li><li>개발시에 테스트-수정-리로드 사이클을 짧게 유지하기 위해 바인드를 이용하는 방법</li><li>컨테이너에서 빠르게 리빌드를 하기위한 <code class="language-text">node_modules</code> 관리(이렇게 할 수 있는 트릭이 있다)</li><li><a href="https://docs.npmjs.com/cli/shrinkwrap">npm shirinkwrap</a>를 이용한 반복적인 빌드</li><li>개발환경과 프로덕션환경에서의 <code class="language-text">Dockerfile</code> 공유</li></ul><p>이 튜토리얼은 도커나 노드제이에스에 약간 익숙한 사람들을 대상으로 작성되었다. 만약 도커에 대한 약간의 사전 지식을 알고 싶다면 <a href="http://jdlm.info/ds-docker-demo/">도커에 대한 슬라이드를 참고</a>하거나 아니면 여기 저기 많이 널려있는 도커관련 아티클들을 참고하면 된다.</p><h3>Getting Started</h3><p>일단 아무것도 없는 상태에서 시작해보자. 만들고자 하는 최종적인 코드는 <a href="https://github.com/jdleesmiller/docker-chat-demo">여기</a>에 있다. 그리고 진행될 각 스텝에 해당하는 태그들이 있다.</p><p>도커가 없다면 호스트에 노드와 필요한 디펜던시들을 설치 하는것을 시작으로 <code class="language-text">npm init</code> 으로 새로운 패키지를 만들어야 한다. 이런 작업을 피할 수 없지만 시작부터 도커를 이용한다면 이야기는 달라진다. (그리고 어떤것도 호스트에 설치할 필요가 없는것은 도커의 큰 장점이다.) 그래서 node가 이미 설치되어 있는 “bootstrapping container”를 만드는 것으로 시작을 한다. 그리고 이것으로 어플리케이션을 위한 npm 패키지를 설정한다.</p><p>두개의 파일을 작성 해야하는데 <code class="language-text">Dockerfile</code>과 <code class="language-text">docker-compose.yml</code>이다. 이 파일들은 나중에 계속 내용을 추가 할 것이다. <code class="language-text">Dockerfile</code>부터 시작하자.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">FROM node:4.3.2RUN useradd --user-group --create-home --shell /bin/false app &amp;&amp;\  npm install --global npm@3.7.5ENV HOME=/home/appUSER appWORKDIR $HOME/chat</code></pre></div><p>이 파일은 상대적으로 짧다. 하지만 이미 중요한 포인트들은 모두 가지고 있다.</p><ol><li>현 시점에서 가장 최신 버전의 공식 장기 지원(LTS) 도커이미지로 시작을 한다. 나는 <code class="language-text">node:argon</code>이나 <code class="language-text">node:latest</code>같은 유동적인 테그네임보다는 명확한 버전을 표기하는 것을 선호한다. 당신 혹은 누군가를 위해 이 이미지를 다른 머신에 빌드할때 동일한 버전을 사용할 수 있고 버전 차이로 인한 여러가지 문제를 피할 수 있다.</li><li>컨테이너 안에서 앱을 실행하기 위해 단순하게 <code class="language-text">app</code>이라는 기본적인 권한의 유저를 만든다. 이렇게 하지 않으면 컨테이너 안의 모든 프로세스들은 루트권한으로 실행되게 되는데 이렇게 되면 보안상의 베스트 프랙티스와 <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege">원칙</a>에 어긋나게 된다. 많은 튜토리얼들이 단순함을 위해 이 단계를 건너뛰고 있고 이 일을 하기 위해선 추가적으로 해야할 일이 있지만 나는 이 작업이 매우 중요하다고 생각한다.</li><li>가장 최근 버전의 NPM을 설치 한다. 이건 반드시 필요한 작업은 아니지만 NPM 최근 많은 부분에서 발전이 있었고 특히 <code class="language-text">npm shrinkwrap</code> 지원은 더 나아졌다.(shrinkwrap에 대한 더 자세한 것들은 곧 다룬다.) 다시 말하지만 추후 빌드중에 의도치 않은 업그레이드를 피하기 위해 꼭 명확한 버전을 Dockerfile에 명시하는것이 최선이라고 생각한다.</li><li>마지막으로 하나의 <code class="language-text">RUN</code> 명령당 두 개의 쉘 명령을 연결한다. 이것은 결과 이미지에 레이어 수를 줄여준다. 이 예제에서는 크게 중요해 보이지는 않지만 필요 이상의 레이어를 사용하지 않는 것은 <a href="https://docs.docker.com/engine/userguide/eng-image/dockerfile_best-practices/">좋은 습관</a>이다. 이렇게 하면 패키지를 다운로드하거나 압축을 풀고, 빌드를 하고, 설치를 할때 사용되는 디스크 용량과 다운로드 시간을 아낄 수 있다. 그래서 각 스텝별로 중간 파일을 만들지 않고 한 스텝으로 정리할 수 있다.</li></ol><p>자, 이제 <code class="language-text">docker-compose.yml</code> 을 구성해보자.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">chat:  build: .  command: echo &#39;ready&#39;  volumes:    - .:/home/app/chat</code></pre></div><p>이 파일은 <code class="language-text">Dockerfile</code>에 의해 만들어지는 한개의 서비스를 정의 한다. 이것이 하는 일은 <code class="language-text">ready</code>를 echo 하고 종료하는 것 밖에 없다. 불륨 라인의 <code class="language-text">.:/home/app/chat</code>는 도커에게 호스트의 어플리케이션 폴더 <code class="language-text">.</code>을 컨테이너 안쪽의 <code class="language-text">/home/app/chat</code>에 마운트하게 해 호스트의 소스파일이 자동적으로 컨테이너 안쪽으로 반영되도록 하게 한다. (상호 반영됨) 개발중에 test-edit-reload 사이클을 가능한 짧게 유지하는 것은 매우 중요하지만 NPM이 디펜던시 모듈들을 설치할 때 이슈를 만들게 된다. 이것에 대해서는 곧 다시 다루게 된다.</p><p>아무튼 지금까지는 잘 진행된다. docker-compose를 실행하게 되면 도커는 이미지를 만들어 Dockerfile에 정의된 내용대로 노드를 셋업하게 되고 그 이미지와 함께 컨테이너를 시작한 뒤 모든게 정상이라고 OK를 보여주는 echo 명령을 <code class="language-text">RUN</code>한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose upBuilding chatStep 1 : FROM node:4.3.2 ---&gt; 3538b8c69182...lots of build output...Successfully built 1aaca0ac5d19Creating dockerchatdemo_chat_1Attaching to dockerchatdemo_chat_1chat_1 | readydockerchatdemo_chat_1 exited with code 0</code></pre></div><p>그리고 이제 같은 이미지로 부터 만들어진 컨테이너 안의 인터렉티브 쉘을 실행한 뒤 초기 패키지 파일을 만든다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose run --rm chat /bin/bashapp@e93024da77fb:~/chat$ npm init --yes... writes package.json ...app@e93024da77fb:~/chat$ npm shrinkwrap... writes npm-shrinkwrap.json ...app@e93024da77fb:~/chat$ exit</code></pre></div><p>그리고 호스트에 작업한 파일들을 버전 컨트롤 시스템에 커밋할 수 있다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ tree.├── Dockerfile├── docker-compose.yml├── npm-shrinkwrap.json└── package.json</code></pre></div><p><a href="https://github.com/jdleesmiller/docker-chat-demo/tree/02-bootstrapped">여기</a> 에서 지금까지 만들어진 코드들을 확인할 수 있다.</p><h3>디펜던시 설치</h3><p>다음에 할 일은 앱의 디펜던시들을 설치하는 것이다. <code class="language-text">docker-compose up</code>을 처음 실행하면 앱이 실행될 준비를 하기 위해 <code class="language-text">Dockerfile</code>의 내용대로 컨테이너에 디펜던시들이 설치된다.</p><p>그렇게 하기 위해 <code class="language-text">Dockerfile</code>의 <code class="language-text">npm install</code>을 실행하기 전에 <code class="language-text">package.json</code>과 <code class="language-text">npm-shrinkwrap.json</code> 파일을 이미지 안으로 복사한다. 아래는 복사를 위한 Dockerfile의 change 정보이다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">diff --git a/Dockerfile b/Dockerfileindex c2afee0..9cfe17c 100644--- a/Dockerfile+++ b/Dockerfile@@ -5,5 +5,9 @@ RUN useradd --user-group --create-home --shell /bin/false app &amp;&amp;\ ENV HOME=/home/app+COPY package.json npm-shrinkwrap.json $HOME/chat/+RUN chown -R app:app $HOME/*+ USER app WORKDIR $HOME/chat+RUN npm install</code></pre></div><p>다시 약간의 변화를 주었지만 몇가지 중요한 포인트가 있다.</p><ol><li><code class="language-text">COPY</code> 명령을 통해 어플리케이션 전체를 호스트에서 <code class="language-text">$HOME/chat</code>으로 복사할 수 있지만 우리는 패키징 파일들만 복사하게 된다. 이렇게 우리가 필요로 하는 파일만 복사하고 <code class="language-text">npm install</code>을 통해서 나머지를 카피하는 것이 도커 빌드시 시간적인 장점이 있다는 것을 추후 알 수 있게 된다. 이것은 <code class="language-text">docker build</code>의 레이어 캐싱의 장점을 더 잘 활용하는 것이다.</li><li><code class="language-text">COPY</code> 명령을 통해 컨테이너로 복사된 파일들은 결과적으로 root가 소유하게 되어 우리의 비특권유저인 <code class="language-text">app</code> 이 읽거나 쓰지 못하게 한다. 그래서 카피한 이후 간단히 <code class="language-text">chown</code> 명령을 이용해 사용을 허가할 수 있다.(<code class="language-text">USER app</code> 단계 이후에 <code class="language-text">COPY</code>를 수행해서 <code class="language-text">app</code> 유저로 파일 카피를 수행하면 더 좋을 것 같지만 <a href="https://github.com/docker/docker/issues/6119">아직은 불가능하다.</a></li><li>마지막으로 <code class="language-text">npm install</code>을 끝에 추가한다. 이 명령은 <code class="language-text">app</code> 유저로 실행되어 <code class="language-text">$HOME/chat/node-modules</code>에 디펜던시들을 컨테이너에 설치하게 된다. (추가적으로 <code class="language-text">npm cache clean</code>을 추가하여 NPM이 인스톨중에 다운로드한 tar파일들을 지우는 게 좋다. 이 파일들은 이미지를 다시 빌드할 때 아무런 도움이 되지 않으니 공간을 더 확보하는 편이 좋다.)</li></ol><p>마지막 내용은 개발시 이미지를 사용할 때 몇몇 문제의 원인이 된다. 왜냐하면 <code class="language-text">$HOME/chat</code>을 컨테이너에서 호스트의 어플리케이션 폴더로 바인드 했기 때문이다. 바인드로 인해 불행히도 우리가 인스톨한 <code class="language-text">node_modules</code>를 효과적으로 숨겨주기 때문에 <code class="language-text">node_modules</code> 폴더는 호스트에 존재하지 않게 된다.</p><h3><code class="language-text">node_modules</code> 불륨 트릭</h3><p>이 문제를 해결하기 위해 <a href="http://bitjudo.com/blog/2014/03/13/building-efficient-dockerfiles-node-dot-js/">여러가지 방법</a>이 있지만 내 생각에 가장 우아한 <a href="http://stackoverflow.com/questions/30043872/docker-compose-node-modules-not-present-in-a-volume-after-npm-install-succeeds">방법</a>은 불륨을 바인드안에서 <code class="language-text">node_modules</code>를 포함하도록 하는 것이다. 이렇게 하기 위해선 도커 컴포즈파일 끝부분에 라인 한줄만 추가하면 된다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">diff --git a/docker-compose.yml b/docker-compose.ymlindex 9e0b012..9ac21d6 100644--- a/docker-compose.yml+++ b/docker-compose.yml@@ -3,3 +3,4 @@ chat:   command: echo &#39;ready&#39;   volumes:     - .:/home/app/chat+    - /home/app/chat/node_modules</code></pre></div><p>적용하는 것은 간단하지만 이렇게 하기 위해 내부적으로는 꽤 작업이 수행된다.</p><ol><li><p>빌드를 할때, <code class="language-text">npm install</code>은 디펜던시들을(다음 섹션에서 추가하게됨) 이미지 내의 <code class="language-text">$HOME/chat/node_modules</code>에 인스톨한다. 이미지의 파일들을 파란색으로 표현했다.(역: 마크다운 문법으로 인해 색은 생략함, 아래 코드블럭내용이 모두 파란색)</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">~/chat$ tree # in image.├── node_modules│   ├── abbrev...│   └── xmlhttprequest├── npm-shrinkwrap.json└── package.json</code></pre></div></li><li><p>추후 컴포즈파일을 이용해 이미지에서 컨테이너를 시작하게 되면 도커는 호스트의 어플리케이션 폴더를 컨테이너의 <code class="language-text">$HOME/chat</code> 안으로 바인드한다. 호스트의 파일은 빨간색으로 표현했다.(역: 상동)</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">~/chat$ tree # in container without node_modules volume.├── Dockerfile├── docker-compose.yml├── node_modules├── npm-shrinkwrap.json└── package.json</code></pre></div></li></ol><p>불행히도 컨테이너 내의 <code class="language-text">node_modules</code>는 바인드에 의해 숨겨지기 때문에 호스트에 보이는 것은 빈 <code class="language-text">node_modules</code> 이다.</p><ol start="3"><li><p>그러나 아직 끝난 게 아니다. 다음으로 도커는 이미지 안의 <code class="language-text">$HOME/chat/node_modules</code>를 가지고 있는 불륨을 생성하고 컨테이너에 마운트한다. 그리고 이는 다시 호스트의 바인드로부터 숨겨진다.(역: 다 빨간색이고 node_modules과 하위만 파란색)</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">~/chat$ tree # in container with node_modules volume.├── Dockerfile├── docker-compose.yml├── node_modules│   ├── abbrev...│   └── xmlhttprequest├── npm-shrinkwrap.json└── package.json</code></pre></div></li></ol><p>이제 우리가 원하는 것을 얻었다. 호스트의 우리의 소스파일들은 컨테이너 안으로 바인드되어 빠른 수정을 가능케하는 반면 디펜던시들은 컨테이너 안에 있어 앱을 실행할때 사용할 수 있다.</p><p>(추가팁: 아마도 이런 디펜던시 파일들이 실제로 어디에 저장되어 있는지 궁금할 것이다. 짧게 말하면 도커에 의해 관리되는 분리된 호스트의 디렉터리에 있다. 더 자세한 정보는 <a href="https://docs.docker.com/engine/tutorials/dockervolumes/">여기</a>에서 확인할 수 있다.</p><h3>패키지 설치 그리고 Shrinkwrap</h3><p>이제 이미지를 다시 빌드해 패키지를 설치해보자</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose build... builds and runs npm install (with no packages yet)...</code></pre></div><p>채팅앱은 express버전 4.10.2가 필요하다. <code class="language-text">npm install</code>을  <code class="language-text">—save</code>옵션과 함께 실행 하여 <code class="language-text">package.json</code>에 기록하고 <code class="language-text">npm-shrinkwrap.json</code>도 업데이트한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose run --rm chat /bin/bashapp@9d800b7e3f6f:~/chat$ npm install --save express@4.10.2app@9d800b7e3f6f:~/chat$ exit</code></pre></div><p>꼭 정확한 버전을 명시할 필요는 없다. 그냥 <code class="language-text">npm install —save express</code>로 어떤 버전이던 최종버전으로 설치해도 좋다. package.json과 shrinkwrap은 이렇게 설치해도 해당 버전으로 기록이 되기 때문이다.</p><p>npm의 shrinkwrap 기능을 이용하는 이유는 직접적인 디펜던시의 버전들은 package.json통해서 고정할 수 있는 반면 그 디펜던시들의 디펜던시들은 고정할 수 없기 때문이다.(루즈하게 명시된 버전의 경우) 이 말은 나중에 누군가가 이미지를 다시 빌드할때 간접적인 디펜던시들의 버전이 다름으로 인해 앱이 깨지는것에 대해 보장 할 수 없다는 말이다. 나에겐 생각보다 자주 발생했다. 그래서 shrinkwrap을 사용하는것을 권장한다. 만약 당신이 루비의 훌륭한 <a href="http://bundler.io/">bundler</a> 디펜던시 매니저에 익숙하다면 <code class="language-text">npm-shrinkwrap.json</code>은 <code class="language-text">Gemfile.lock</code>과 같다고 보면 된다.</p><p>마지막으로 주목해야 할 내용은 우리는 일회성으로 <code class="language-text">docker-compose run</code>에 의해 컨테이너를 실행하기 때문에 실질적으로 우리가 설치한 모듈들은 사라진다. 하지만 다음에 도커빌드를 다시 실행하면 도커는 <code class="language-text">package.json</code>와 shrinkwrap의 변경을 감지하고 <code class="language-text">npm install</code>을 다시 실행해 필요한 패키지가 이미지에 설치된다.(매우 중요한 점이다.)</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose build... lots of npm install output$ docker-compose run --rm chat /bin/bashapp@912d123f3cea:~/chat$ ls node_modules/accepts              cookie-signature  depd ......app@912d123f3cea:~/chat$ exit</code></pre></div><p><a href="https://github.com/jdleesmiller/docker-chat-demo/tree/03-dependencies">여기</a> 에 지금까지의 코드가 있다.</p><h3>앱을 실행하기</h3><p>우리는 드디어 앱을 설치할 준비가 되었다. <a href="https://github.com/rauchg/chat-example">남아있는 소스파일들</a> <code class="language-text">index.js</code>와 <code class="language-text">index.html</code>을 설치한다. 그리고 <code class="language-text">socket.it</code> 패키지를 이전 섹션에서 한 것처럼 <code class="language-text">npm install —save</code>를 이용해 설치한다.</p><p>우리의 <code class="language-text">Dockerfile</code>에서 이미지를 이용해 컨테이너를 시작할 때 어떤 커맨드를 실행해야 하는지 알려줄 수 있고 이 경우엔 <code class="language-text">node index.js</code>가 된다. 도커 컴포즈파일에서 더미 커맨드를 지워 도커가 <code class="language-text">Dockerfile</code>을 이용해 커맨드를 실행하게 한다. 마침내 도커 컴포즈에게 호스트의 컨테이너에서 3000포트를 열게 하여 브라우저에서 엑세스 할 수 있게 한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">diff --git a/Dockerfile b/Dockerfileindex 9cfe17c..e2abdfc 100644--- a/Dockerfile+++ b/Dockerfile@@ -11,3 +11,5 @@ RUN chown -R app:app $HOME/* USER app WORKDIR $HOME/chat RUN npm install++CMD [&quot;node&quot;, &quot;index.js&quot;]diff --git a/docker-compose.yml b/docker-compose.ymlindex 9ac21d6..e7bd11e 100644--- a/docker-compose.yml+++ b/docker-compose.yml@@ -1,6 +1,7 @@ chat:   build: .-  command: echo &#39;ready&#39;+  ports:+    - &#39;3000:3000&#39;   volumes:     - .:/home/app/chat     - /home/app/chat/node_modules</code></pre></div><p>그리고 마지막 빌드를 하고  <code class="language-text">docker-compose up</code> 실행한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose build... lots of build output$ docker-compose upRecreating dockerchatdemo_chat_1Attaching to dockerchatdemo_chat_1chat_1 | listening on *:3000</code></pre></div><p>그리고 (맥의 경우 boot2docker VM에서 3000포트를 사용할 수 있게 하기 위해 몇가지 작업을 해야한다.) <code class="language-text">http://localhost:3000</code> 에서 앱이 동작하는것을 볼 수 있다.</p><p><img src="http://jdlm.info/assets/docker_chat_demo/chat.png" alt="실행화면"></p><p><a href="https://github.com/jdleesmiller/docker-chat-demo/tree/04-the-app">여기</a> 에서 지금까지의 코드를 받을 수 있다.</p><h3>Docker for Dev and Prod</h3><p>이제 우리는 개발 환경에서 도커 컴포즈를 이용해 앱을 실행할 수 있다.(멋지다.!) 이제 가능한 다음 단계에 대해 알아보자.</p><p>만약 프로덕션의 우리의 애플리케이션 이미지를 배포하고자 한다면 위의 이미지에 어플리케이션 소스를 빌드하고 싶을 것이다. 이렇게 하기 위해선 <code class="language-text">npm install</code>을 한 후에 단순히 어플리케이션 폴더를 컨테이너에 복사하게 된다. 물론 <code class="language-text">npm install</code>은  <code class="language-text">package.json</code>이나 <code class="language-text">npm-shrinkwrap.json</code>이 변경되었을 때만 다시 실행하는 것이지 우리의 소스파일이 수정되었기 때문에 실행하는 것은 아니다. 또한 루트에 의한 카피문제는 여기서도 우회해야 한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">diff --git a/Dockerfile b/Dockerfileindex e2abdfc..68d0ad2 100644--- a/Dockerfile+++ b/Dockerfile@@ -12,4 +12,9 @@ USER app WORKDIR $HOME/chat RUN npm install+USER root+COPY . $HOME/chat+RUN chown -R app:app $HOME/*+USER app+ CMD [&quot;node&quot;, &quot;index.js&quot;]</code></pre></div><p>이제 호스트의 어떠한 불륨도 필요 없이 컨테이너를 단독으로 실행할 수 있게 되었다.  도커 컴포즈는 컴포즈 파일에서 코드의 중복을 피하기 위해 <a href="https://docs.docker.com/compose/extends/">여러 컴포즈 파일을 구성</a> 할 수 있지만 이번 프로그램은 매우 단순하기 때문에 단순히 두 번째 컴포즈 파일, <code class="language-text">docker-compose.prod.yml</code> 를 추가해 프로덕션 환경에서 응용 프로그램을 실행시킨다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">chat:  build: .  environment:    NODE_ENV: production  ports:    - &#39;3000:3000&#39;</code></pre></div><p>아래와 같이 어플리케이션을 ‘production mode’로 실행한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose -f docker-compose.prod.yml upRecreating dockerchatdemo_chat_1Attaching to dockerchatdemo_chat_1chat_1 | listening on *:3000</code></pre></div><p>그리고 유사하게 컨테이너를 개발환경에 특화시킬 수 있다. 예를들면 소스 파일이 수정되면 자동적으로 컨테이너 안에서 다시 로드되도록 어플리케이션을 <a href="https://github.com/remy/nodemon">노드몬</a> 에서 실행하는 것이다. (만약 도커 머신을 맥에서 사용한다면 아직 정상적으로 동작하지 않을 것이다. virtualbox의 쉐어드 폴더는 inotify로 동작하지 않기 때문이다. 빠른 시일내에 나아지길 바랄 뿐이다.) <code class="language-text">npm install —save-dev nodemon</code>을 컨테이너에서 실행한 뒤 다시 빌드한다. 이제 개발횐경에서 더 적합 설정의 컨테이너에서 <code class="language-text">node index.js</code> 디폴트 프로덕션 커맨드를 재정의 한다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">diff --git a/docker-compose.yml b/docker-compose.ymlindex e7bd11e..d031130 100644--- a/docker-compose.yml+++ b/docker-compose.yml@@ -1,5 +1,8 @@ chat:   build: .+  command: node_modules/.bin/nodemon index.js+  environment:+    NODE_ENV: development   ports:     - &#39;3000:3000&#39;   volumes:</code></pre></div><p>풀패스를 이용해 <code class="language-text">nodemon</code>을 실행하는데 이는 NPM 디펜던시로 설치되어 있어 PATH 환경변수를 통해 접근할 수 없기 때문이다. NPM 스크립트를 이용해 <code class="language-text">nodemon</code>을 실행할 수 있지만 이 방식은 문제점이 있다. NPM 스크립트로 실행하게 되면 NPM이 TERM시그널을  Docker에서 실제 프로세스로 전달하지 않아 종료까지 10초 정도가 걸리게 되는 경향이 있다.(기본적인 제한) 그래서 직접 명령을 실행하는 것이 나을 수 있다..(이 문제는  NPM 3.8.1 이상에서 수정된 것 같다. 이제 NPM스크립트를 컨테이너에서 사용할 수 있다.!)</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose upRemoving dockerchatdemo_chat_1Recreating 3aec328ebc_dockerchatdemo_chat_1Attaching to dockerchatdemo_chat_1chat_1 | [nodemon] 1.9.1chat_1 | [nodemon] to restart at any time, enter `rs`chat_1 | [nodemon] watching: *.*chat_1 | [nodemon] starting `node index.js`chat_1 | listening on *:3000</code></pre></div><p>특수화된 도커 컴포즈파일은 같은 <code class="language-text">Dockerfile</code>과 이미지를 다수의 환경에 걸쳐 사용할 수 있게 한다.프로덕션에 개발 디펜던시를 설치하는 것이 공간 효율적으로 좋지는 않겠지만 내 생각엔 좋은 개발-프로덕션 환경을 위해 희생해야할 등가의 작은 희생이라고 생각한다. <a href="http://llis.nasa.gov/lesson/1196">현명한 사람이 이야기했듯</a> ‘test as you fly, fly as you test.’ 지금 이 순간 우린 어떠한 테스트도 가지고 있지 않다. 하지만 원한다면 아래와 같이 쉽게 적용할 수 있다.</p><div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">$ docker-compose run --rm chat /bin/bash -c &#39;npm test&#39;npm info it worked if it ends with oknpm info using npm@3.7.5npm info using node@v4.3.2npm info lifecycle chat@1.0.0~pretest: chat@1.0.0npm info lifecycle chat@1.0.0~test: chat@1.0.0&gt; chat@1.0.0 test /home/app/chat&gt; echo &quot;Error: no test specified&quot; &amp;&amp; exit 1Error: no test specifiednpm info lifecycle chat@1.0.0~test: Failed to exec test scriptnpm ERR! Test failed.  See above for more details.</code></pre></div><p>(팁:  <code class="language-text">npm —silent</code> 이렇게 실행하면 추가적인 아웃풋은 생략할 수 있다.)</p><p><a href="https://github.com/jdleesmiller/docker-chat-demo">여기</a> 지금까지의 코드가 있다.</p><h3>결론</h3><ul><li>도커안에서 앱을 작성하고 개발환경과 프로덕션환경에서 완벽히 실행해 봤다. 오예!</li><li>호스트에 아무것도 설치하지 않고 노드환경을 구성하기 위해 몇가지의 허들을 넘어야했지만 이것이 도움이 된다는 것을 알았으면 좋겠다. 그리고 이런 작업은 한번만 수행하면 된다.</li><li>하위 폴더에 노드와 NPM의 디펜던시를 두는것은 루비의 bundler가 디펜던시를 다른곳에 설치하는 것에 비하면 조금 복잡할 수 있지만 <code class="language-text">nested volume</code> 트릭으로 어느정도 쉽게 해결할 수 있었다.</li><li><p>여기서 다룬 것은 매우 간단한 어플리케이션이었지만 아래의 내용에 해당하는 추가 아티클들이 많이 있다.</p><ul><li>예를들어 API, Service Worker, 정적 프론테 엔드등 여려 서비스의 프로젝트를 구축한다. 하나의 큰 저장소가 서비스를 각각의 저장소로 분리하는 것보다 관리하기 쉬워보이지만 이것도 약간의 복잡성을 가지고 있다.</li><li><code class="language-text">npm link</code>를 사용하면 서비스들이 공유해 패키지안의 코드를 재사용할 수 있다.</li><li>도커를 이용해 로그관리 툴이나 프로세스 모니터링 툴을 프로덕션에서 교체한다.</li><li>데이터 마이그레이션을 포함해 상태나 구성을 관리한다.</li></ul></li></ul><p>여기까지 읽은 사람은 꼭 내 <a href="https://twitter.com/jdleesmiller">twitter</a> 를 팔로우 해주면 고맙겠다.그리고 <a href="https://www.overleaf.com/">Overleaf</a> 에서는 사람을 구하고 있다 :)</p><p>드래프트 버전의 이 아티클을 리뷰해준 <a href="https://twitter.com/mmazour">Michael Mzaour</a> 와 <a href="https://twitter.com/DrHammersley">John Hammersley</a> 에게 감사를 표한다.</p></article><a href="https://www.buymeacoffee.com/shiren" target="_blank" class="post__BuyMeACoffee-jduihc-0 fwhAwW"><img src="https://cdn.buymeacoffee.com/buttons/lato-orange.png" alt="Buy Me A Coffee"/></a><a href="https://ui.toast.com" target="_blank" class="post__AD-jduihc-3 bMNeLH">Why not?<br/><img src="/image/toastui.png" alt="TOAST UI"/></a><ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-4811193197471582" data-ad-slot="7153541064"></ins><div class="recomendPost__Wrapper-sc-3jwe1s-0 bxZXPa"><h3>Recommend Post...</h3><div class="recomendPost__Container-sc-3jwe1s-1 dTTBOH"><div class="recomendPost__Item-sc-3jwe1s-3 ivcrIP"><div><div><a class="category__Category-sc-156lajf-0 lkGVVW" href="/frontend/1">frontend</a><a class="category__Category-sc-156lajf-0 lkGVVW" href="/tool/1">tool</a></div><a class="recomendPost__RecomendLink-sc-3jwe1s-5 ifREFF" href="/2019-05-22-크롬-네이티브-레이지-로딩/"><h4 class="recomendPost__Title-sc-3jwe1s-2 jiiBBj">크롬 네이티브 레이지 로딩</h4><p class="recomendPost__Date-sc-3jwe1s-4 jjtNTt">22 May, 2019</p></a></div></div><div class="recomendPost__Item-sc-3jwe1s-3 ivcrIP"><div><div><a class="category__Category-sc-156lajf-0 lkGVVW" href="/framework/1">framework</a><a class="category__Category-sc-156lajf-0 lkGVVW" href="/translation/1">translation</a></div><a class="recomendPost__RecomendLink-sc-3jwe1s-5 ifREFF" href="/2018-08-14-Vue.js에서의-다이나믹-컴포넌트-템플릿/"><h4 class="recomendPost__Title-sc-3jwe1s-2 jiiBBj">Vue.js에서의 다이나믹 컴포넌트 템플릿</h4><p class="recomendPost__Date-sc-3jwe1s-4 jjtNTt">14 August, 2018</p></a></div></div><div class="recomendPost__Item-sc-3jwe1s-3 ivcrIP"><div><div><a class="category__Category-sc-156lajf-0 lkGVVW" href="/productivity/1">productivity</a><a class="category__Category-sc-156lajf-0 lkGVVW" href="/motivation/1">motivation</a><a class="category__Category-sc-156lajf-0 lkGVVW" href="/life/1">life</a></div><a class="recomendPost__RecomendLink-sc-3jwe1s-5 ifREFF" href="/2020-09-07/"><h4 class="recomendPost__Title-sc-3jwe1s-2 jiiBBj">하루 25분 실행하기: 하루를 대하는 14년차 개발자의 자세</h4><p class="recomendPost__Date-sc-3jwe1s-4 jjtNTt">07 September, 2020</p></a></div></div><div class="recomendPost__Item-sc-3jwe1s-3 ivcrIP"><div><div><a class="category__Category-sc-156lajf-0 lkGVVW" href="/frontend/1">frontend</a><a class="category__Category-sc-156lajf-0 lkGVVW" href="/refactoring/1">refactoring</a></div><a class="recomendPost__RecomendLink-sc-3jwe1s-5 ifREFF" href="/2020-07-27-1/"><h4 class="recomendPost__Title-sc-3jwe1s-2 jiiBBj">이벤트 핸들러를 대하는 개발자의 자세</h4><p class="recomendPost__Date-sc-3jwe1s-4 jjtNTt">27 July, 2020</p></a></div></div></div></div></div></div><footer class="footer__Wrapper-sc-1omp129-0 dKXtAy"><ul class="footer__FooterLinks-sc-1omp129-1 cfgaXG"><li><a href="mailto:shirenbeat@gmail.com" rel="noreferrer" target="_blank"><svg viewBox="0 0 512 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M256 8C118.941 8 8 118.919 8 256c0 137.059 110.919 248 248 248 48.154 0 95.342-14.14 135.408-40.223 12.005-7.815 14.625-24.288 5.552-35.372l-10.177-12.433c-7.671-9.371-21.179-11.667-31.373-5.129C325.92 429.757 291.314 440 256 440c-101.458 0-184-82.542-184-184S154.542 72 256 72c100.139 0 184 57.619 184 160 0 38.786-21.093 79.742-58.17 83.693-17.349-.454-16.91-12.857-13.476-30.024l23.433-121.11C394.653 149.75 383.308 136 368.225 136h-44.981a13.518 13.518 0 00-13.432 11.993l-.01.092c-14.697-17.901-40.448-21.775-59.971-21.775-74.58 0-137.831 62.234-137.831 151.46 0 65.303 36.785 105.87 96 105.87 26.984 0 57.369-15.637 74.991-38.333 9.522 34.104 40.613 34.103 70.71 34.103C462.609 379.41 504 307.798 504 232 504 95.653 394.023 8 256 8zm-21.68 304.43c-22.249 0-36.07-15.623-36.07-40.771 0-44.993 30.779-72.729 58.63-72.729 22.292 0 35.601 15.241 35.601 40.77 0 45.061-33.875 72.73-58.161 72.73z"></path></svg></a></li><li><a href="//www.github.com/shiren" rel="noreferrer" target="_blank"><svg viewBox="0 0 496 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"></path></svg></a></li><li><a href="//www.instagram.com/shiren" rel="noreferrer" target="_blank"><svg viewBox="0 0 448 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M224 202.66A53.34 53.34 0 10277.36 256 53.38 53.38 0 00224 202.66zm124.71-41a54 54 0 00-30.41-30.41c-21-8.29-71-6.43-94.3-6.43s-73.25-1.93-94.31 6.43a54 54 0 00-30.41 30.41c-8.28 21-6.43 71.05-6.43 94.33s-1.85 73.27 6.47 94.34a54 54 0 0030.41 30.41c21 8.29 71 6.43 94.31 6.43s73.24 1.93 94.3-6.43a54 54 0 0030.41-30.41c8.35-21 6.43-71.05 6.43-94.33s1.92-73.26-6.43-94.33zM224 338a82 82 0 1182-82 81.9 81.9 0 01-82 82zm85.38-148.3a19.14 19.14 0 1119.13-19.14 19.1 19.1 0 01-19.09 19.18zM400 32H48A48 48 0 000 80v352a48 48 0 0048 48h352a48 48 0 0048-48V80a48 48 0 00-48-48zm-17.12 290c-1.29 25.63-7.14 48.34-25.85 67s-41.4 24.63-67 25.85c-26.41 1.49-105.59 1.49-132 0-25.63-1.29-48.26-7.15-67-25.85s-24.63-41.42-25.85-67c-1.49-26.42-1.49-105.61 0-132 1.29-25.63 7.07-48.34 25.85-67s41.47-24.56 67-25.78c26.41-1.49 105.59-1.49 132 0 25.63 1.29 48.33 7.15 67 25.85s24.63 41.42 25.85 67.05c1.49 26.32 1.49 105.44 0 131.88z"></path></svg></a></li><li><a href="//www.facebook.com/shirenbeat" rel="noreferrer" target="_blank"><svg viewBox="0 0 512 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.78 90.69 226.38 209.25 245V327.69h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.31 482.38 504 379.78 504 256z"></path></svg></a></li><li><a href="//www.twitter.com/@shirenbeat" rel="noreferrer" target="_blank"><svg viewBox="0 0 512 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path></svg></a></li><li><a href="https://blog.shiren.dev/feed.xml" rel="noreferrer" target="_blank"><svg viewBox="0 0 448 512" aria-hidden="true" focusable="false" fill="currentColor" xmlns="http://www.w3.org/2000/svg" class="StyledIconBase-ea9ulj-0 duvCfz"><path fill="currentColor" d="M128.081 415.959c0 35.369-28.672 64.041-64.041 64.041S0 451.328 0 415.959s28.672-64.041 64.041-64.041 64.04 28.673 64.04 64.041zm175.66 47.25c-8.354-154.6-132.185-278.587-286.95-286.95C7.656 175.765 0 183.105 0 192.253v48.069c0 8.415 6.49 15.472 14.887 16.018 111.832 7.284 201.473 96.702 208.772 208.772.547 8.397 7.604 14.887 16.018 14.887h48.069c9.149.001 16.489-7.655 15.995-16.79zm144.249.288C439.596 229.677 251.465 40.445 16.503 32.01 7.473 31.686 0 38.981 0 48.016v48.068c0 8.625 6.835 15.645 15.453 15.999 191.179 7.839 344.627 161.316 352.465 352.465.353 8.618 7.373 15.453 15.999 15.453h48.068c9.034-.001 16.329-7.474 16.005-16.504z"></path></svg></a></li></ul><p>© <!-- -->Sungho Kim<!-- --> • <!-- -->2020</p></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-59192630-1', 'auto', {});
      
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/2016-08-23-도커로-노드앱을-구축하며-배운것들/";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-e31c70983b95bf93fc93.js"],"app":["/app-405ee9187730cca34a4a.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-a6b4ba2f2d2bbc34753f.js"],"component---src-templates-page-tsx":["/component---src-templates-page-tsx-119bd834de07dec4d612.js"],"component---src-templates-post-list-page-by-tag-tsx":["/component---src-templates-post-list-page-by-tag-tsx-070b118046c021e79d64.js"],"component---src-templates-post-list-page-tsx":["/component---src-templates-post-list-page-tsx-d468a3a0b8a20673c724.js"],"component---src-templates-post-tsx":["/component---src-templates-post-tsx-aead819d3dc60c6642f1.js"]};/*]]>*/</script><script src="/polyfill-e31c70983b95bf93fc93.js" nomodule=""></script><script src="/component---src-templates-post-tsx-aead819d3dc60c6642f1.js" async=""></script><script src="/d02ec7a3dda7d60b2b6f376de52e71913d9ba5e3-33b05cc05498f66ebadc.js" async=""></script><script src="/commons-8f7b6066959a66490891.js" async=""></script><script src="/app-405ee9187730cca34a4a.js" async=""></script><script src="/framework-de237a875aa45b276a9d.js" async=""></script><script src="/styles-55e82d6ff5158c00b714.js" async=""></script><script src="/webpack-runtime-fa2cbd3128fdd077019f.js" async=""></script></body></html>